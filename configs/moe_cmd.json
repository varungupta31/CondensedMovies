{
    "name": "MoEE",
    "n_gpu": 1,
    "n_clips": 3,
    "arch": {
        "type": "MoEE",
        "args": {
            "pretrained": "",
            "projection_dim": 512,
            "use_moe": false,
            "aggregation_method": {
                "label": {
                    "type": "net_vlad",
                    "cluster_size": 10,
                    "ghost_clusters": 0
                },
                "description": {
                    "type": "net_vlad",
                    "cluster_size": 10,
                    "ghost_clusters": 0
                },
                "face": {
                    "type": "mean"
                },
                "speech": {
                    "type": "mean",
                    "cluster_size": 0,
                    "ghost_clusters": 0
                }
            }
        }
    },
    "data_loader": {
        "type": "MovieClipsDataLoader",
        "args": {
            "data_dir": "/ssd_scratch/cvit/varun/cmdformer_data/cmd_format",
            "metadata_dir": "/ssd_scratch/cvit/varun/cmdformer_data/cmd_format/metadata",
            "batch_size": 64,
            "shuffle": true,
            "num_workers": 4,
            "label": "description",

            "experts_used": {
                "characters": false,
                "clip_name": false,
                "description": true,
                "face": false,
                "rgb": false,
                "scene": false,
                "speech": false,
                "video": true,
                "s3d": false
            },
            "experts": {
              "characters": "",
              "clip_name": "",
              "context": "",
              "description": "BERT/bert-large-cased/description/agg/agg.npy",
              "face": "",
              "plot": "",
              "rgb": "",
              "scene": "",
              "speech": "",
              "video": "I3D/pred_i3d_25fps_256px_stride25_offset0_inner_stride1/agg/agg_feats_mean.npy",
              "s3d": ""
            },
            "max_tokens": {
                "description": 20,
                "characters": 10,
                "face": 5,
                "plot": 60,
                "speech": 20
            }
        }
    },
    "optimizer": {
        "type": "Adam",
        "args":{
            "lr": 0.00005,
            "weight_decay": 0,
            "amsgrad": true
        }
    },
    "loss": {
        "type": "MaxMarginRankingLoss",
        "args":{
            "margin": 0.12132983763957966,
            "fix_norm": true
        }
    },
    "metrics": [
        "t2v_metrics",
        "v2t_metrics"
    ],

    "lr_scheduler": {
        "type": "StepLR",
        "args": {
            "step_size": 50,
            "gamma": 0.1
        }
    },
    "trainer": {
        "epochs": 50,
        "save_dir": "/ssd_scratch/cvit/varun/cmd_p1f1_custom_feats_baseline_models",
        "save_period": 1,
        "verbosity": 2,
        "monitor": "min val_loss",
        "early_stop": 10,
        "tensorboard": false,
        "retrieval": "inter"
    },
    "wandb_run_name": "p1f1_1e-5_text_video_cmd_baseline",
    "wandb_run_id": "1d"
}
